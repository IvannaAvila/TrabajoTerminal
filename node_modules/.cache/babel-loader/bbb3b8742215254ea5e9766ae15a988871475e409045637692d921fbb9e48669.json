{"ast":null,"code":"var _jsxFileName = \"/home/ivanna/Documents/tt2/inicio/src/capturarimg.jsx\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useContextCaptura } from './Contextcaptura';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction CapturaImg() {\n  _s();\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const [imagenCapturada, setImagenCapturada] = useContextCaptura;\n  const [camaraIniciada, setCamaraIniciada] = useState(false);\n  const [nombreImagen, setNombreImagen] = useState(null);\n  const handleFileInputChange = event => {\n    const imagenCapturada = event.target.files[0];\n    const alternarCamara = async () => {\n      try {\n        if (!camaraIniciada) {\n          const stream = await navigator.mediaDevices.getUserMedia({\n            video: true\n          });\n          videoRef.current.srcObject = stream;\n        } else {\n          detenerCamara();\n        }\n        setCamaraIniciada(!camaraIniciada);\n      } catch (error) {\n        console.error('Error al acceder a la cámara:', error);\n      }\n    };\n    const detenerCamara = () => {\n      const stream = videoRef.current.srcObject;\n      const tracks = stream.getTracks();\n      tracks.forEach(track => track.stop());\n      videoRef.current.srcObject = null;\n    };\n    const capturaImg = () => {\n      const context = canvasRef.current.getContext('2d');\n      const video = videoRef.current;\n      canvasRef.current.width = video.videoWidth;\n      canvasRef.current.height = video.videoHeight;\n      context.drawImage(video, 0, 0, video.videoWidth, video.videoHeight);\n\n      // Obtener la URL de datos de la imagen capturada\n      const urlImagen = canvasRef.current.toDataURL('image/png');\n      setImagenCapturada(urlImagen);\n\n      // Obtener el nombre de la imagen\n      const nombre = `imagen_capturada_${new Date().getTime()}.png`;\n      setNombreImagen(nombre);\n\n      // Detener la cámara después de capturar la imagen\n      detenerCamara();\n      setCamaraIniciada(false);\n    };\n    const descargarImagen = () => {\n      const enlaceDescarga = document.createElement('a');\n      enlaceDescarga.href = imagenCapturada;\n      enlaceDescarga.download = nombreImagen || 'imagen_capturada.png';\n      enlaceDescarga.click();\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"tomarfoto\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"botoncam\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: alternarCamara,\n          className: \"botoncam\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"busca.png\",\n            alt: \"Bot\\xF3n con imagen\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 11\n          }, this), camaraIniciada ? 'Detener cámara' : 'Iniciar cámara']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"botoncam\",\n        children: camaraIniciada && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: capturaImg,\n          className: \"botoncam\",\n          children: \"Tomar foto\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 7\n      }, this), imagenCapturada && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"nombreimagencaptura\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: imagenCapturada,\n          alt: \"Imagen capturada\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Imagen: \", nombreImagen]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: descargarImagen,\n          children: \"Descargar Imagen\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: {\n            pathname: \"/resultadocaptura\",\n            state: {\n              imagenCapturada\n            }\n          },\n          className: \"botonbuscar\",\n          children: \"Buscar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"video\", {\n        ref: videoRef,\n        style: {\n          display: 'none'\n        },\n        autoPlay: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: canvasRef,\n        style: {\n          display: 'none'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 5\n    }, this);\n  };\n}\n_s(CapturaImg, \"gf3akAscwtCGZFsfUB6THScQdf0=\");\n_c = CapturaImg;\nexport default CapturaImg;\nvar _c;\n$RefreshReg$(_c, \"CapturaImg\");","map":{"version":3,"names":["React","useRef","useState","Link","useContextCaptura","jsxDEV","_jsxDEV","CapturaImg","_s","videoRef","canvasRef","imagenCapturada","setImagenCapturada","camaraIniciada","setCamaraIniciada","nombreImagen","setNombreImagen","handleFileInputChange","event","target","files","alternarCamara","stream","navigator","mediaDevices","getUserMedia","video","current","srcObject","detenerCamara","error","console","tracks","getTracks","forEach","track","stop","capturaImg","context","getContext","width","videoWidth","height","videoHeight","drawImage","urlImagen","toDataURL","nombre","Date","getTime","descargarImagen","enlaceDescarga","document","createElement","href","download","click","className","children","onClick","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","to","pathname","state","ref","style","display","autoPlay","_c","$RefreshReg$"],"sources":["/home/ivanna/Documents/tt2/inicio/src/capturarimg.jsx"],"sourcesContent":["import React, { useRef, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useContextCaptura } from './Contextcaptura';\n\nfunction CapturaImg() {\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const [imagenCapturada, setImagenCapturada] = useContextCaptura;\n  const [camaraIniciada, setCamaraIniciada] = useState(false);\n  const [nombreImagen, setNombreImagen] = useState(null);\n\n  const handleFileInputChange = (event) => {\n  const imagenCapturada = event.target.files[0]\n\n  const alternarCamara = async () => {\n    try {\n      if (!camaraIniciada) {\n        const stream = await navigator.mediaDevices.getUserMedia({ video: true });\n        videoRef.current.srcObject = stream;\n      } else {\n        detenerCamara();\n      }\n      setCamaraIniciada(!camaraIniciada);\n    } catch (error) {\n      console.error('Error al acceder a la cámara:', error);\n    }\n  };\n\n  const detenerCamara = () => {\n    const stream = videoRef.current.srcObject;\n    const tracks = stream.getTracks();\n\n    tracks.forEach((track) => track.stop());\n    videoRef.current.srcObject = null;\n  };\n\n  const capturaImg = () => {\n    const context = canvasRef.current.getContext('2d');\n    const video = videoRef.current;\n\n    canvasRef.current.width = video.videoWidth;\n    canvasRef.current.height = video.videoHeight;\n\n    context.drawImage(video, 0, 0, video.videoWidth, video.videoHeight);\n\n    // Obtener la URL de datos de la imagen capturada\n    const urlImagen = canvasRef.current.toDataURL('image/png');\n    setImagenCapturada(urlImagen);\n\n    // Obtener el nombre de la imagen\n    const nombre = `imagen_capturada_${new Date().getTime()}.png`;\n    setNombreImagen(nombre);\n\n    // Detener la cámara después de capturar la imagen\n    detenerCamara();\n    setCamaraIniciada(false);\n  };\n\n  const descargarImagen = () => {\n    const enlaceDescarga = document.createElement('a');\n    enlaceDescarga.href = imagenCapturada;\n    enlaceDescarga.download = nombreImagen || 'imagen_capturada.png';\n    enlaceDescarga.click();\n  };\n\n  return (\n    <div className='tomarfoto'>\n      <div className='botoncam'>\n        <button onClick={alternarCamara} className='botoncam'>\n          <img src=\"busca.png\" alt=\"Botón con imagen\" />\n          {camaraIniciada ? 'Detener cámara' : 'Iniciar cámara'}\n        </button>\n      </div>\n      <div className='botoncam'>\n        {camaraIniciada && (\n          <button onClick={capturaImg} className='botoncam'>Tomar foto</button>\n        )}\n      </div>\n      {imagenCapturada && (\n        <div className='nombreimagencaptura'>\n          <img src={imagenCapturada} alt=\"Imagen capturada\"  />\n          <p>Imagen: {nombreImagen}</p>\n          <button onClick={descargarImagen}>Descargar Imagen</button>\n          <Link to={{ pathname: \"/resultadocaptura\", state: { imagenCapturada } }} className='botonbuscar'>Buscar</Link>\n\n        </div>\n      )}\n\n      <video ref={videoRef} style={{ display: 'none' }} autoPlay />\n      <canvas ref={canvasRef} style={{ display: 'none' }} />\n    </div>\n  );\n}\n}\nexport default CapturaImg;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}